3(ns semantics-interpreter.data-structure)

;; TODO: type and name field may be defined as meta information

(defrecord ^:private Place 
    [type, ^String name])

(defrecord ^:private Port 
    [type, ^String name, ^boolean export?])

(defrecord ^:private Transition 
    [type, ^String name, ^Place from, ^Place to, ^Port port])

(defrecord ^:private AtomicComponent
    [type, ^String name, ^Place current, transitions])

(defrecord ^:private PortBinding 
    [type, ^String name, source-component, ^Port source, ^Port target ])

(defrecord ^:private Interaction
    [type, ^String name, port-bingdings, ^Port export])

(defrecord ^:private CompoundComponent
    [type, ^String name, components, port-bingdings])

(defn create-place
  [^String name]
  (->Place 'place name))

(defn create-port
  [^String name export?]
  (->Port 'port name export?))

(defn create-transition
  [^Place from ^Place to ^Port port]
  (->Transition 'transition "" from to port))

(defn create-transitions
  [& t-list]
  (apply list t-list))

(defn create-atom
  [^String name ^Place current transitions]
  (->AtomComponent 'atomic name current transitions))

(defn create-port-binding
  [component ^Port source ^Port target]
  (->PortBinding 'port-binding "" component source target))
(defn create-port-bindings
  [& b-list]
  (apply list b-list))

(defn create-interaction
  [^String name port-bindings ^Port export]
  (->Interaction 'interaction name port-bindings export))

(defn create-components
  [& c-list]
  (apply list c-list))

(defn create-compound
  [^String name components port-bindings]
  (->CompoundComponent 'compound name components port-bindings))


